{
  "description": "Automatic reflection on session end when enabled",
  "hooks": {
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "condition": {
              "operator": "file-exists",
              "file": ".claude/reflect.local.md"
            },
            "prompt": "Auto-reflection hook triggered. Read .claude/reflect.local.md and check if 'enabled: true' is in the YAML frontmatter. If enabled is true, analyze this conversation for learnings (corrections, explicit instructions, successful patterns) and propose skill updates following the reflect skill guidelines. Show diffs and ask for approval before making any changes. If enabled is false or not set, respond only with: 'Auto-reflection is disabled.'"
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "condition": {
              "operator": "file-exists",
              "file": ".claude/reflect.local.md"
            },
            "prompt": "Auto-reflection hook triggered. Read .claude/reflect.local.md and check if 'enabled: true' is in the YAML frontmatter. If enabled is true, analyze this subagent's conversation for learnings (corrections, explicit instructions, successful patterns) and propose skill updates following the reflect skill guidelines. Show diffs and ask for approval before making any changes. If enabled is false or not set, respond only with: 'Auto-reflection is disabled.'"
          }
        ]
      }
    ]
  }
}
